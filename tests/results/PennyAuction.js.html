
<html>
	<head>
		<title>Test results for: tests/PennyAuction.js</title>
		<style>
			body {
				background: #FFF;
				padding: 10px;
			}
			pre {
				font-family: Consolas, 'Courier New';
				font-size: 75%;
			}
		</style>
	</head>
	<body>
		<h1>Test results for: tests/PennyAuction.js</h1>
		<pre>
  ========================================= 
  =========== <span style="color:#000"><b> SMOCHA STARTING </b><span style="color:#000"> ===========
  ========================================= 

<span style="color:#AAA">├ <span style="color:#000"> <b>File: tests/PennyAuction.js</b> </span></span></span></span> 
<span style="color:#AAA">│  ├ <span style="color:#000"> <b><span style="color:#000">Testing with regular params.<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Will test a Penny Auction with these params:<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Prize: 50000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Price: 1000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Incr: 100000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Add Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> before: Create Malicious Bidder </span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Create and fund a MaliciousBidder instance.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This bidder's fallback function causes an OOG error.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: ExpensivePayableBidder.new(, {from: 0x6759...}) was successful (block 3345, 206926 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.fund({value: BID_PRICE.mul(5), from: anon}) was successful (block 3346, 21441 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Named Addresses:<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder1:         0xd9c62d731859585ac42b48238ec038f5fe6d6a7c<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder2:         0x1f2b8d5c1bda3cad17f7c0d64bc806a6650fd904<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder3:         0xd2d3ac1472ab9b192e59bafca86b4372ea1f26f6<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderFirst:     0xf0d5c1619b8efc164535c315b383d682f8be46c9<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderSecond:    0x16cd66b081a5b88f214b860f82fb0e6fc1847489<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderThird:     0xdf93b5a1303c1be0e813eea372f2da26a79f7673<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  collector:       0xc39835f05a1b5b9842f5ec18071f016cede36a1e<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  maliciousBidder: 0xe6d699b1d5019fa4e76ffe5730e95b6a9fe11ca5<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  nonBidder:       0xd3f522f17cd81e89a5782bae4369f53601002884<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (620 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Creation<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too little funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 100 GWei, 5, 5, {value: 0.049999999999999999 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (32 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too much funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 100 GWei, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (39 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when initialPrize is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.050000000000000001 ETH, 1000 GWei, 100 GWei, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (21 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidPrice is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 0.001000000000000001 ETH, 100 GWei, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (23 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 100.000000000001 GWei, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (22 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is > bidPrice </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0.001000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (21 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is < INITIAL_PRIZE.mul(-1) </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.050000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (35 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Auction Lifecycle<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> before: Can be created </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 100 GWei, 5, 5, {value: 0.05 ETH, from: 0x6759...}) was successful (block 3354, 1173728 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'Started(time, initialBlocks)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (583 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">When Started<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should have proper state and balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.collector.call() should equal <u>collector</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.initialPrize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidPrice.call() should equal 1000 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidIncr.call() should equal 100 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidAddBlocks.call() should equal 5<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() should equal 3359<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isPaid.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (301 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3355, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (837 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too little </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3356, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1181 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too much </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3357, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1076 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> works correctly </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3358, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 900 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1006 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> currentWinner cannot bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3359, 42935 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.675 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1082 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendFees()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fees should be redeemable </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendFees.call({from: 0x3a60...}) should equal 900 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendFees({from: 0x3a60...}) was successful (block 3360, 34860 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should be zero<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'FeesSent(time, amount)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> got fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-174.3 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should be the prize (50100000000000000)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1344 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">More Bidding...<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder2 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder2</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3361, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0.0018 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1228 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder3 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder3</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3362, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0.0027 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1019 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Handles bids within same block<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund works </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This tests a case where three bids occur on the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">We ensure the first and second bidders are refunded.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1, tx2, and tx3<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">All txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3363, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3363, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx3 was successful (block 3363, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderFirst</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderThird</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by one bid<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2891 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund fails </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">In this case, two bids occur in the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">However, the first bidder's fallback function fails or tries a gas DoS.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This test ensures bidding handles this properly.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1 and tx2.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Both txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3364, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3364, 58225 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundFailure(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by two bids<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' event was found from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2548 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding from a contract<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should accept a bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.doBid(auction.address, {from: anon}) was successful (block 3365, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' was the only event from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1108 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After all bidding:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: Is not yet ended </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (33 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3366, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (798 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fastforward to make blocksRemaining() 0 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining 24 blocks...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2334 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3391, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1167 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should have correct state </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (51 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendPrize()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: auction should be ended, and won by maliciousBidder </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() should equal <u>maliciousBidder</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (49 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With limited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">The winner requires a ton of gas to pay for sending the prize.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">.sendPrize(50000) only allots 50,000 gas to pay the winner, and should fail.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> tx should error </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(50000, {from: <u>nonBidder</u>}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(50000, {from: <u>nonBidder</u>}) was successful (block 3392, 96468 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeFailure(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-482.34 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1748 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With unlimited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">If we call .sendPrize(0), however, it should work (and use a lot of gas)<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> should pay to winner (callable by anyone) </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(0, {from: <u>nonBidder</u>}) should equal [true, 0.0507 ETH]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(0, {from: <u>nonBidder</u>}) was successful (block 3393, 148922 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeSuccess(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-744.61 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> got prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> gets nothing<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> is only fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2430 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After Paid:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: .isPaid() should be true </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (19 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not be payable again </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3394, 24174 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-120.87 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (923 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3395, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1060 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow remaining fees to be redeemed </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendFees.call({from: 0x3a60...}) should equal 0.0054 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendFees({from: 0x3a60...}) was successful (block 3396, 33224 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should be zero<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'FeesSent(time, amount)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> got fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-166.12 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should be the prize (0)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1312 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should now have zero balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (87 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  ├ <span style="color:#000"> <b><span style="color:#000">Testing with 0 bidIncr<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Will test a Penny Auction with these params:<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Prize: 50000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Price: 1000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Incr: 0<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Add Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> before: Create Malicious Bidder </span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Create and fund a MaliciousBidder instance.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This bidder's fallback function causes an OOG error.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: ExpensivePayableBidder.new(, {from: 0x6759...}) was successful (block 3397, 206926 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.fund({value: BID_PRICE.mul(5), from: anon}) was successful (block 3398, 21441 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Named Addresses:<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder1:         0xd9c62d731859585ac42b48238ec038f5fe6d6a7c<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder2:         0x1f2b8d5c1bda3cad17f7c0d64bc806a6650fd904<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder3:         0xd2d3ac1472ab9b192e59bafca86b4372ea1f26f6<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderFirst:     0xf0d5c1619b8efc164535c315b383d682f8be46c9<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderSecond:    0x16cd66b081a5b88f214b860f82fb0e6fc1847489<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderThird:     0xdf93b5a1303c1be0e813eea372f2da26a79f7673<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  collector:       0xc39835f05a1b5b9842f5ec18071f016cede36a1e<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  maliciousBidder: 0xd091dd21bfb14f6239b3ed3a3a8f2a4d945167fc<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  nonBidder:       0xd3f522f17cd81e89a5782bae4369f53601002884<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (624 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Creation<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too little funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0, 5, 5, {value: 0.049999999999999999 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (26 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too much funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (22 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when initialPrize is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.050000000000000001 ETH, 1000 GWei, 0, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (20 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidPrice is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 0.001000000000000001 ETH, 0, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (22 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 1, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (44 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is > bidPrice </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0.001000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (21 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is < INITIAL_PRIZE.mul(-1) </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.050000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (23 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Auction Lifecycle<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> before: Can be created </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0, 5, 5, {value: 0.05 ETH, from: 0x6759...}) was successful (block 3406, 1173408 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'Started(time, initialBlocks)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (595 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">When Started<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should have proper state and balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.collector.call() should equal <u>collector</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.initialPrize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidPrice.call() should equal 1000 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidIncr.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidAddBlocks.call() should equal 5<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() should equal 3411<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isPaid.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (275 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3407, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (847 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too little </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3408, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1144 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too much </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3409, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1076 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> works correctly </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3410, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 1000 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1013 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> currentWinner cannot bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3411, 42935 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.675 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1096 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendFees()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fees should be redeemable </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendFees.call({from: 0x3a60...}) should equal 1000 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendFees({from: 0x3a60...}) was successful (block 3412, 34860 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should be zero<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'FeesSent(time, amount)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> got fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-174.3 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should be the prize (50000000000000000)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1351 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">More Bidding...<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder2 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder2</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3413, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0.002 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (973 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder3 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder3</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3414, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0.003 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (994 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Handles bids within same block<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund works </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This tests a case where three bids occur on the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">We ensure the first and second bidders are refunded.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1, tx2, and tx3<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">All txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3415, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3415, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx3 was successful (block 3415, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderFirst</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderThird</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by one bid<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (3002 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund fails </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">In this case, two bids occur in the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">However, the first bidder's fallback function fails or tries a gas DoS.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This test ensures bidding handles this properly.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1 and tx2.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Both txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3416, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3416, 58225 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundFailure(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by two bids<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' event was found from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2597 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding from a contract<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should accept a bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.doBid(auction.address, {from: anon}) was successful (block 3417, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' was the only event from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (983 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After all bidding:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: Is not yet ended </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (35 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3418, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (841 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fastforward to make blocksRemaining() 0 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining 24 blocks...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2329 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3443, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1244 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should have correct state </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (43 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendPrize()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: auction should be ended, and won by maliciousBidder </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() should equal <u>maliciousBidder</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (46 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With limited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">The winner requires a ton of gas to pay for sending the prize.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">.sendPrize(50000) only allots 50,000 gas to pay the winner, and should fail.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> tx should error </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(50000, {from: <u>nonBidder</u>}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(50000, {from: <u>nonBidder</u>}) was successful (block 3444, 96468 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeFailure(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-482.34 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1675 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With unlimited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">If we call .sendPrize(0), however, it should work (and use a lot of gas)<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> should pay to winner (callable by anyone) </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(0, {from: <u>nonBidder</u>}) should equal [true, 0.05 ETH]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(0, {from: <u>nonBidder</u>}) was successful (block 3445, 148922 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeSuccess(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-744.61 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> got prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> gets nothing<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> is only fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2137 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After Paid:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: .isPaid() should be true </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (15 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not be payable again </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3446, 24174 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-120.87 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (832 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3447, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1070 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow remaining fees to be redeemed </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendFees.call({from: 0x3a60...}) should equal 0.006 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendFees({from: 0x3a60...}) was successful (block 3448, 33224 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should be zero<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'FeesSent(time, amount)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> got fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-166.12 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should be the prize (0)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1267 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should now have zero balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (88 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  ├ <span style="color:#000"> <b><span style="color:#000">Testing with negative bidIncr.<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Will test a Penny Auction with these params:<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Prize: 50000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Price: 1000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Incr: -5000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Add Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> before: Create Malicious Bidder </span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Create and fund a MaliciousBidder instance.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This bidder's fallback function causes an OOG error.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: ExpensivePayableBidder.new(, {from: 0x6759...}) was successful (block 3449, 206926 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.fund({value: BID_PRICE.mul(5), from: anon}) was successful (block 3450, 21441 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Named Addresses:<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder1:         0xd9c62d731859585ac42b48238ec038f5fe6d6a7c<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder2:         0x1f2b8d5c1bda3cad17f7c0d64bc806a6650fd904<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder3:         0xd2d3ac1472ab9b192e59bafca86b4372ea1f26f6<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderFirst:     0xf0d5c1619b8efc164535c315b383d682f8be46c9<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderSecond:    0x16cd66b081a5b88f214b860f82fb0e6fc1847489<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderThird:     0xdf93b5a1303c1be0e813eea372f2da26a79f7673<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  collector:       0xc39835f05a1b5b9842f5ec18071f016cede36a1e<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  maliciousBidder: 0xa7f8daf77cdc40171839a72d0e579c3be75d7133<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  nonBidder:       0xd3f522f17cd81e89a5782bae4369f53601002884<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (612 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Creation<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too little funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.005 ETH, 5, 5, {value: 0.049999999999999999 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (25 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too much funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.005 ETH, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (23 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when initialPrize is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.050000000000000001 ETH, 1000 GWei, -0.005 ETH, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (22 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidPrice is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 0.001000000000000001 ETH, -0.005 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (48 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.004999999999999999 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (24 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is > bidPrice </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0.001000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (23 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is < INITIAL_PRIZE.mul(-1) </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.050000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (23 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Auction Lifecycle<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> before: Can be created </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.005 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) was successful (block 3458, 1175392 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'Started(time, initialBlocks)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (654 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">When Started<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should have proper state and balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.collector.call() should equal <u>collector</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.initialPrize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidPrice.call() should equal 1000 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidIncr.call() should equal -0.005 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidAddBlocks.call() should equal 5<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() should equal 3463<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isPaid.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (281 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3459, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (894 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too little </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3460, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1082 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too much </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3461, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1050 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> works correctly </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3462, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0.006 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1020 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> currentWinner cannot bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3463, 42935 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.675 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1074 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendFees()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fees should be redeemable </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendFees.call({from: 0x3a60...}) should equal 0.006 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendFees({from: 0x3a60...}) was successful (block 3464, 34860 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should be zero<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'FeesSent(time, amount)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> got fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-174.3 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should be the prize (45000000000000000)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1380 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">More Bidding...<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder2 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder2</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3465, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0.012 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (944 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder3 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder3</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3466, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0.018 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1000 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Handles bids within same block<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund works </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This tests a case where three bids occur on the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">We ensure the first and second bidders are refunded.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1, tx2, and tx3<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">All txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3467, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3467, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx3 was successful (block 3467, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderFirst</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderThird</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by one bid<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2903 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund fails </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">In this case, two bids occur in the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">However, the first bidder's fallback function fails or tries a gas DoS.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This test ensures bidding handles this properly.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1 and tx2.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Both txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3468, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3468, 58225 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundFailure(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by two bids<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' event was found from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2692 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding from a contract<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should accept a bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.doBid(auction.address, {from: anon}) was successful (block 3469, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' was the only event from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (965 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Cannot bid to make prize negative<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Deplete the prize() to near 0 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Prize should be depleted after 3 bids, and fail on next.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Bid #1 from bidder 1...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Bid #2 from bidder 2...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Bidding with maliciousBidder so they it's the winner.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.doBid(auction.address, {from: anon}) was successful (block 3472, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (791 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Next bid should fail </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">0 prize remaining. Bidding now should fail.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3473, 43702 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-218.51 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1350 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After all bidding:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: Is not yet ended </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (32 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3474, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (829 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fastforward to make blocksRemaining() 0 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining 35 blocks...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (3443 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3510, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1238 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should have correct state </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (35 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendPrize()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: auction should be ended, and won by maliciousBidder </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() should equal <u>maliciousBidder</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (52 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With limited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">The winner requires a ton of gas to pay for sending the prize.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">.sendPrize(50000) only allots 50,000 gas to pay the winner, and should fail.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> tx should error </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(50000, {from: <u>nonBidder</u>}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(50000, {from: <u>nonBidder</u>}) was successful (block 3511, 87468 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeFailure(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-437.34 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1565 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With unlimited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">If we call .sendPrize(0), however, it should work (and use a lot of gas)<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> should pay to winner (callable by anyone) </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(0, {from: <u>nonBidder</u>}) should equal [true, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(0, {from: <u>nonBidder</u>}) was successful (block 3512, 142222 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeSuccess(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-711.11 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> got prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> gets nothing<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> is only fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2199 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After Paid:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: .isPaid() should be true </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (16 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not be payable again </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3513, 24174 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-120.87 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (792 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3514, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1051 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow remaining fees to be redeemed </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendFees.call({from: 0x3a60...}) should equal 0.054 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendFees({from: 0x3a60...}) was successful (block 3515, 33224 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should be zero<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'FeesSent(time, amount)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> got fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-166.12 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should be the prize (0)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1251 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should now have zero balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (88 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  ├ <span style="color:#000"> <b><span style="color:#000">Testing with full bidIncr<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Will test a Penny Auction with these params:<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Prize: 50000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Price: 1000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Incr: 1000000000000000<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Bid Add Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">Initial Blocks: 5<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  ├ <span style="color:#000"> before: Create Malicious Bidder </span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Create and fund a MaliciousBidder instance.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This bidder's fallback function causes an OOG error.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: ExpensivePayableBidder.new(, {from: 0x6759...}) was successful (block 3516, 206926 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.fund({value: BID_PRICE.mul(5), from: anon}) was successful (block 3517, 21441 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Named Addresses:<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder1:         0xd9c62d731859585ac42b48238ec038f5fe6d6a7c<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder2:         0x1f2b8d5c1bda3cad17f7c0d64bc806a6650fd904<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidder3:         0xd2d3ac1472ab9b192e59bafca86b4372ea1f26f6<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderFirst:     0xf0d5c1619b8efc164535c315b383d682f8be46c9<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderSecond:    0x16cd66b081a5b88f214b860f82fb0e6fc1847489<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  bidderThird:     0xdf93b5a1303c1be0e813eea372f2da26a79f7673<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  collector:       0xc39835f05a1b5b9842f5ec18071f016cede36a1e<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  maliciousBidder: 0x076743b248fd2e7807ec48c8936b473084b0b9dd<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <span style="color:#AAA">  nonBidder:       0xd3f522f17cd81e89a5782bae4369f53601002884<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (646 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Creation<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too little funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 1000 GWei, 5, 5, {value: 0.049999999999999999 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (23 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when too much funds are sent </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 1000 GWei, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (55 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when initialPrize is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.050000000000000001 ETH, 1000 GWei, 1000 GWei, 5, 5, {value: 0.050000000000000001 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (22 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidPrice is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 0.001000000000000001 ETH, 1000 GWei, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (22 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is not divisible by GWei </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0.001000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (20 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is > bidPrice </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 0.001000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (41 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> Fails when bidIncr is < INITIAL_PRIZE.mul(-1) </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, -0.050000000000000001 ETH, 5, 5, {value: 0.05 ETH, from: 0x6759...}) failed<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (21 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  ├ <span style="color:#000"> <b><span style="color:#000">Auction Lifecycle<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> before: Can be created </span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ newTx: PennyAuction.new(<u>collector</u>, 0.05 ETH, 1000 GWei, 1000 GWei, 5, 5, {value: 0.05 ETH, from: 0x6759...}) was successful (block 3525, 1173792 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'Started(time, initialBlocks)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (723 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">When Started<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should have proper state and balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.collector.call() should equal <u>collector</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.initialPrize.call() should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidPrice.call() should equal 1000 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidIncr.call() should equal 1000 GWei<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.bidAddBlocks.call() should equal 5<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() should equal 3530<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isPaid.call() should equal false<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> should equal 0.05 ETH<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (257 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3526, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (804 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too little </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3527, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1049 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fails when passing too much </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3528, 42865 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.325 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1051 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> works correctly </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3529, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1044 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> currentWinner cannot bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3530, 42935 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder1</u> lost txFee (-214.675 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1110 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendFees()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fees should be redeemable </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">With these parameters, no fees will ever be accrued. Skipping.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (0 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">More Bidding...<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder2 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder2</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3531, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1120 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow bid by bidder3 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by bidPrice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidder3</u> decreased by BID_PRICE and txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: BID_PRICE}) was successful (block 3532, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.totalFees.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (974 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Handles bids within same block<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund works </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This tests a case where three bids occur on the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">We ensure the first and second bidders are refunded.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1, tx2, and tx3<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">All txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3533, 45749 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3533, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx3 was successful (block 3533, 50629 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderFirst</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost txFee (but got refunded)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderThird</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by one bid<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2831 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> When refund fails </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">In this case, two bids occur in the same block.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">However, the first bidder's fallback function fails or tries a gas DoS.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">This test ensures bidding handles this properly.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> </span></span><i><span style="color:#555">Note: The weird gas amounts are due to a bug in Ganache.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Stopped mining, queued both tx1 and tx2.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining block now...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Both txs executed on same block, in expected order.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx1 was successful (block 3534, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => tx2 was successful (block 3534, 58225 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ exactly 2 logs found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundFailure(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' log was found<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() is incremented twice<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() is incremented only once<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>bidderSecond</u> lost bid+txFee<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by two bids<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(time, bidder)' event was found from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2655 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">Bidding from a contract<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should accept a bid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => maliciousBidder.doBid(auction.address, {from: anon}) was successful (block 3535, 57229 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() increased by prizeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() increased by feeIncr<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() is new currentWinner<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() increased by 1<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() increased by bidAddBlocks<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> increased by BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> lost BID_PRICE<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidOccurred(bidder, time)' was the only event from <u>auction</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1263 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After all bidding:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: Is not yet ended </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (29 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> Should not allow prize to be paid </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3536, 23874 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-119.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (954 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> fastforward to make blocksRemaining() 0 </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">Mining 25 blocks...<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2776 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3562, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1300 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should have correct state </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (34 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">.sendPrize()<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: auction should be ended, and won by maliciousBidder </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.isEnded.call() should equal true<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.getBlocksRemaining.call() should equal 0<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.currentWinner.call() should equal <u>maliciousBidder</u><span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (64 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With limited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">The winner requires a ton of gas to pay for sending the prize.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">.sendPrize(50000) only allots 50,000 gas to pay the winner, and should fail.<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> tx should error </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(50000, {from: <u>nonBidder</u>}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(50000, {from: <u>nonBidder</u>}) was successful (block 3563, 96468 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeFailure(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-482.34 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1690 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> <b><span style="color:#000">With unlimited gas<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <b></b></span></span><i><span style="color:#555">If we call .sendPrize(0), however, it should work (and use a lot of gas)<span style="color:#000"></span></span></i>  
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> should pay to winner (callable by anyone) </span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(0, {from: <u>nonBidder</u>}) should equal [true, 0.057 ETH]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(0, {from: <u>nonBidder</u>}) was successful (block 3564, 148922 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeSuccess(time, redeemer, recipient, amount, gasLimit)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-744.61 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>maliciousBidder</u> got prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> lost prize<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>collector</u> gets nothing<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ Balance of <u>auction</u> is only fees<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (2325 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  ├ <span style="color:#000"> <b><span style="color:#000">After Paid:<span style="color:#000"> </span></span></b></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> before: .isPaid() should be true </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (13 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not be payable again </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.sendPrize.call(false, {from: 0x3a60...}) should equal [false, 0]<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ tx: <u>auction</u>.sendPrize(false, {from: 0x3a60...}) was successful (block 3565, 24174 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'SendPrizeError(msg)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of 0x3a60... lost txFee (-120.87 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (967 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should not accept bids </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ () => auction.sendTransaction({from: bidder, value: bidAmt}) was successful (block 3566, 42274 gas used)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ 'BidRefundSuccess(msg, bidder)' log was the only log<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.prize.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.fees.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.numBids.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ <u>auction</u>.blockEnded.call() not incremented<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>nonBidder</u> lost txFee (-211.37 GWei)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">✓ balance of <u>auction</u> did not change<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (1083 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should allow remaining fees to be redeemed </span></span> 
<span style="color:#AAA">│  │  │  │  │  ├ <span style="color:#000"> <span style="color:#AAA">With these parameters, no fees will ever be accrued. Skipping.<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (0 ms)<span style="color:#000"> </span></span></span></span> 
<span style="color:#AAA">│  │  │  │  ├ <span style="color:#000"> should now have zero balance </span></span> 
<span style="color:#AAA">│  │  │  │  │  └ <span style="color:#000"> <span style="color:#0A0">✓ passed (91 ms)<span style="color:#000"> </span></span></span></span> 

  =========== <span style="color:#0A0"><b> SMOCHA FINISHED </b><span style="color:#000">  ===========

  <span style="color:#0A0"><b>118</b><span style="color:#000"><span style="color:#0A0"> passed.<span style="color:#000"> <span style="color:#A00"><b>0</b><span style="color:#000"><span style="color:#A00"> errors.<span style="color:#000"> <span style="color:#555"><b>0</b><span style="color:#000"><span style="color:#555"> skipped.<span style="color:#000"> 116.11s

</span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre>
	</body>
</html>
